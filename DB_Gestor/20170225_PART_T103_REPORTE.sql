--------------------------------------------------------
-- Archivo creado  - sábado-febrero-25-2017   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table PART_T103_REPORTE
--------------------------------------------------------
DROP TABLE "GESTOR"."PART_T103_REPORTE" ;
  CREATE TABLE "GESTOR"."PART_T103_REPORTE" 
   (	"A103CODIGO" NUMBER(7,0), 
	"A103CATEGORIA" NUMBER(7,0), 
	"A103NOMBRE" VARCHAR2(200 BYTE), 
	"A103DESCRIPCION" VARCHAR2(200 BYTE), 
	"A103SQL" VARCHAR2(1000 BYTE), 
	"A103NOMBREPLANTILLA" VARCHAR2(200 BYTE), 
  "A103ICONO" VARCHAR2(50 BYTE), 
	"A103ESTADOREGISTRO" CHAR(1 BYTE), 
	"A103FECHACREACION" DATE, 
	"A103FECHAMODIFICACION" DATE, 
	"A103USUARIOCREACION" NUMBER(7,0), 
	"A103USUARIOMODIFICACION" NUMBER(7,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "GESTORDAT" ;
REM INSERTING into GESTOR.PART_T103_REPORTE
SET DEFINE OFF;

INSERT INTO "GESTOR"."PART_T101_CATEGORIA" (A101CODIGO, A101NOMBRE, A101ESTADOREGISTRO, A101USUARIOCREACION) VALUES ('24', 'TIPOREPORTE', 'A', '0');
INSERT INTO "GESTOR"."PART_T102_LISTA" (A102CODIGO, A102CATEGORIA, A102VALOR, A102ESTADOREGISTRO, A102USUARIOCREACION) VALUES ('105', '24', 'Reportes generales', 'A', '0');
INSERT INTO "GESTOR"."PART_T102_LISTA" (A102CODIGO, A102CATEGORIA, A102VALOR, A102ESTADOREGISTRO, A102USUARIOCREACION) VALUES ('106', '24', 'Reportes gerenciales', 'A', '0');
delete from PART_T103_REPORTE;
Insert into PART_T103_REPORTE (A103CODIGO,A103CATEGORIA,A103NOMBRE,A103DESCRIPCION,A103SQL,A103NOMBREPLANTILLA,A103ICONO,A103ESTADOREGISTRO,A103FECHACREACION,A103FECHAMODIFICACION,A103USUARIOCREACION,A103USUARIOMODIFICACION) values (3,106,'Resumen por estado','Resumen de proyectos por estado','select A102VALOR NOMBRE , count(A002CODIGO) CANTIDAD from GPYT_T002_PROYECTO LEFT JOIN PART_T102_LISTA ON A002ESTADOPROYECTO = A102CODIGO LEFT JOIN GPYT_T041_USUARIO ON A002IDUSR = A041CODIGO LEFT JOIN GPYT_T052_PERSONA ON A041IDPERSONA = A052CODIGO LEFT JOIN GPYT_T001_ENTIDAD ON A001CODIGO  = A052IDENTIDAD WHERE A052IDENTIDAD = :text2 AND TO_NUMBER(TO_CHAR(A002FECHACREACION, ''YYYY'')) = :text2 GROUP BY A102VALOR','3.xlsx','glyphicon-signal','A',to_date('01/03/17','DD/MM/RR'),to_date('01/03/17','DD/MM/RR'),1,null);
Insert into PART_T103_REPORTE (A103CODIGO,A103CATEGORIA,A103NOMBRE,A103DESCRIPCION,A103SQL,A103NOMBREPLANTILLA,A103ICONO,A103ESTADOREGISTRO,A103FECHACREACION,A103FECHAMODIFICACION,A103USUARIOCREACION,A103USUARIOMODIFICACION) values (1,105,'Consulta Proyectos','Consulta proyectos por año y autoridad ambiental','SELECT * FROM GPYV_006_PROYECTOS WHERE A001CODIGO = :text2 AND TO_NUMBER(TO_CHAR(A002FECHACREACION, ''YYYY'')) = :text2','1.xlsx','glyphicon-th-list','A',to_date('26/02/17','DD/MM/RR'),to_date('26/02/17','DD/MM/RR'),1,null);
Insert into PART_T103_REPORTE (A103CODIGO,A103CATEGORIA,A103NOMBRE,A103DESCRIPCION,A103SQL,A103NOMBREPLANTILLA,A103ICONO,A103ESTADOREGISTRO,A103FECHACREACION,A103FECHAMODIFICACION,A103USUARIOCREACION,A103USUARIOMODIFICACION) values (2,106,'Consulta Proyectos todos','Resumen proyectos por año y autoridad ambiental','select A102VALORCORTO NOMBRE , count(A002CODIGO) CANTIDAD from GPYT_T002_PROYECTO LEFT JOIN PART_T102_LISTA ON A002TIPPROYCT = A102CODIGO LEFT JOIN GPYT_T041_USUARIO ON A002IDUSR = A041CODIGO LEFT JOIN GPYT_T052_PERSONA ON A041IDPERSONA = A052CODIGO LEFT JOIN GPYT_T001_ENTIDAD ON A001CODIGO  = A052IDENTIDAD WHERE A052IDENTIDAD = :text2 AND TO_NUMBER(TO_CHAR(A002FECHACREACION, ''YYYY'')) = :text2 GROUP BY A102VALORCORTO','2.xlsx','glyphicon-tasks','A',to_date('26/02/17','DD/MM/RR'),to_date('26/02/17','DD/MM/RR'),1,null);
--------------------------------------------------------
--  DDL for Index PK_T103
--------------------------------------------------------

  CREATE UNIQUE INDEX "GESTOR"."PK_T103" ON "GESTOR"."PART_T103_REPORTE" ("A103CODIGO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "GESTORDAT" ;
--------------------------------------------------------
--  DDL for Index UK_A103NOMBRE
--------------------------------------------------------

  CREATE UNIQUE INDEX "GESTOR"."UK_A103NOMBRE" ON "GESTOR"."PART_T103_REPORTE" ("A103NOMBRE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "GESTORDAT" ;
--------------------------------------------------------
--  Constraints for Table PART_T103_REPORTE
--------------------------------------------------------

  ALTER TABLE "GESTOR"."PART_T103_REPORTE" ADD CONSTRAINT "UK_A103NOMBRE" UNIQUE ("A103NOMBRE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "GESTORDAT"  ENABLE;
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" ADD CONSTRAINT "PK_T103" PRIMARY KEY ("A103CODIGO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "GESTORDAT"  ENABLE;
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" ADD CONSTRAINT "CK_A103ESTADOREGISTRO" CHECK ( A103ESTADOREGISTRO IN ('A', 'I')) ENABLE;
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103USUARIOCREACION" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103ESTADOREGISTRO" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103NOMBREPLANTILLA" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103SQL" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103DESCRIPCION" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103CATEGORIA" NOT NULL ENABLE);
  ALTER TABLE "GESTOR"."PART_T103_REPORTE" MODIFY ("A103CODIGO" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table PART_T103_REPORTE
--------------------------------------------------------

  ALTER TABLE "GESTOR"."PART_T103_REPORTE" ADD CONSTRAINT "FK_T103_T102" FOREIGN KEY ("A103CATEGORIA")
	  REFERENCES "GESTOR"."PART_T102_LISTA" ("A102CODIGO") ENABLE;
