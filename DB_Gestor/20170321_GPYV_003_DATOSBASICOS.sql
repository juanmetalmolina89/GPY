--------------------------------------------------------
-- Archivo creado  - martes-marzo-21-2017   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for View GPYV_003_DATOSBASICOS
--------------------------------------------------------

  CREATE OR REPLACE FORCE VIEW "GESTOR"."GPYV_003_DATOSBASICOS" ("A002CODIGO", "A002NOMBRPROYCT", "A002DESCRPCINPROYCT", "A002TIPPROYCT", "TIPPROYCT", "A002DURCNPREVST", "A002PROYTASCD", "NOMBRPROYCTASCD", "A002UBCCN", "UBCCN", "A020CODDEPARTAMENTO", "A020NOMDEPARTAMENTO", "A020NOMMUNICIPIO", "A002LOCLZCN", "CODDIVIPOLA", "A002IDUSR", "A002SOCEXTRNJR", "A002COSTSESTMDTOTL", "A002COSTSESTMDFORMLCN", "A002COSTTONLDRDCR", "A002TRM", "A002BUSQUDFINNCCN", "A002PLANPRGRMNACNL", "A002OBJTVGENRL", "A002POTNCLESTMDREDCCN", "A002NOMBRPROYCTINGLS", "A002IDSECTORALSCOPE", "A002TECNLGCONTMPLD", "A002IDESCALA", "ESCALA", "A002IDALCANCE", "ALCANCE", "A002IDMETDLGMDL", "A028DESCMETDLGMDL", "A002NROCPAS", "A002PROCSVALDCNEC", "A002IDESTDPROCSVALDCN", "A002IDPROYCTMDL", "A002VIDAUTL", "A002IDTIPPERDACRDTCN", "A002FECHINICIO", "A002FECHFIN", "A002APLICMERCDVOLNTR", "A002IDESTNDRMERCDVOLNTR", "A002ESTADOPROYECTO") AS 
  SELECT P.A002CODIGO, P.A002NOMBRPROYCT, P.A002DESCRPCINPROYCT, P.A002TIPPROYCT, L1.A102VALOR TIPPROYCT, P.A002DURCNPREVST, P.A002PROYTASCD, A.A002NOMBRPROYCT NOMBRPROYCTASCD, 
P.A002UBCCN, L2.A102VALOR UBCCN, A020CODDEPARTAMENTO, A020NOMDEPARTAMENTO, A020NOMMUNICIPIO, P.A002LOCLZCN, SUBSTR(REPLACE(D.A020DIVIPOLA,'-',''),3) CODDIVIPOLA, P.A002IDUSR, P.A002SOCEXTRNJR, 
P.A002COSTSESTMDTOTL, P.A002COSTSESTMDFORMLCN, P.A002COSTTONLDRDCR, P.A002TRM, P.A002BUSQUDFINNCCN, P.A002PLANPRGRMNACNL, P.A002OBJTVGENRL, P.A002POTNCLESTMDREDCCN, 
P.A002NOMBRPROYCTINGLS, P.A002IDSECTORALSCOPE, P.A002TECNLGCONTMPLD, P.A002IDESCALA, L10.A102VALOR ESCALA, P.A002IDALCANCE, L3.A102VALOR ALCANCE, P.A002IDMETDLGMDL, M.A028DESCMETDLGMDL, 
P.A002NROCPAS, P.A002PROCSVALDCNEC, P.A002IDESTDPROCSVALDCN, P.A002IDPROYCTMDL, P.A002VIDAUTL, p.A002IDTIPPERDACRDTCN, P.A002FECHINICIO, P.A002FECHFIN, P.A002APLICMERCDVOLNTR, P.A002IDESTNDRMERCDVOLNTR, P.A002ESTADOPROYECTO
FROM
PART_T102_LISTA L1, -- Tipo proyecto
PART_T102_LISTA L2, -- Ubicacion
PART_T102_LISTA L3, -- Alcance
GPYT_T020_DIVIPOLA D, GPYT_T002_PROYECTO P
LEFT JOIN GPYT_T002_PROYECTO A ON A.A002CODIGO = P.A002PROYTASCD  -- proyecto asociado
LEFT JOIN GPYT_T028_METODOLOGIA_MDL M ON M.A028CODIGO = P.A002IDMETDLGMDL
LEFT JOIN PART_T102_LISTA L4 ON L4.A102CODIGO = P.A002IDESTDPROCSVALDCN -- Estado del proceso de validacion
LEFT JOIN PART_T102_LISTA L5 ON L5.A102CODIGO = P.A002IDPROYCTMDL -- Tipo de proyecto MDL
LEFT JOIN PART_T102_LISTA L6 ON L6.A102CODIGO = P.A002IDTIPPERDACRDTCN -- Tipo de periodo de acreditaci√≤n
LEFT JOIN PART_T102_LISTA L7 ON L7.A102CODIGO = P.A002IDESTNDRMERCDVOLNTR -- Estandar del Mercado Voluntario
LEFT JOIN PART_T102_LISTA L8 ON L8.A102CODIGO = P.A002ESTADOPROYECTO -- Estado del proyecto
--LEFT JOIN GPYT_T020_DIVIPOLA L9 ON L9.A020CODIGO = P.A002LOCLZCN -- Localizacion
LEFT JOIN PART_T102_LISTA L10 ON L10.A102CODIGO = P.A002IDESCALA -- Escala
WHERE P.A002LOCLZCN = D.A020CODIGO -- Divipola
AND L1.A102CODIGO = P.A002TIPPROYCT
AND L2.A102CODIGO = P.A002UBCCN 
AND L3.A102CODIGO = P.A002IDALCANCE;
